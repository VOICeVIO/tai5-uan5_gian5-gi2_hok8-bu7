sudo: false
language: python
python:
- '3.4'
- '3.5'
env:
  matrix: 
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
    - python3-dev
    - libc6-dev-i386
    - linux-libc-dev
    - gcc-multilib
    - libx11-dev
    - libx11-dev:i386
    - git
    - subversion
    - automake
    - libtool
    - zlib1g-dev
    - libbz2-dev
    - liblzma-dev
    - libboost-all-dev
    - libgoogle-perftools-dev
    - libxmlrpc-c++.*-dev
    - cmake
install:
- pip install flake8
- pip install python-coveralls
branches:
  only:
  - master
  - "/\\d+\\.\\d+\\.\\d+/"
script:
- pip install .
- coverage run --source=臺灣言語服務 manage.py test -p 'test*單元試驗.py'
- flake8 . --exclude=venv,文件 --count --show-source --ignore=E501
after_success:
- coverage report
- coveralls
deploy:
  provider: pypi
  user: sih4sing5hong5
  password:
    secure: J8T8072IpOA2NNRrJ0nnJVO21LbG0tH0KGAOEotDaCpusPIy1KuQyfVqdjFc+Dba+dCObgW0UQPgcAhOHk1//DhnwpRRL4L9wZsQjrkmLtKtZSG1z45oYKlF2WEPcCflcdzMyqCwnGfPtWTS5Iex6MfS0qTzRdWlFEnRFMdra6UjpTCIAiFLCETvDbL2VLKbhwENrVRzGSGRVFf9ICjohQyJRaC5Hpr+OVdLOhihev/lbdHZivPWvN6KqqP3ULad0+0ROiLadF6V46RDDYQT3CrNkJK1xVDNQ5F/9Cu95MMbUD1UsyeMBlvViMHSuvO0JzSiN4W6VmgzXxf1wYAlVS2MwbTWIak7+NTYlLt31I3a0dO82iF2ThDCkfK2JSy3UgCbq0x3tAH4wbT/ymXaOpsgKEPNnM+h7Td1o0Tz2ohxNU4g7MV3tGn3T8Fg4HLuGZFtSD/3S6be8TfWIuMJ7L6fuN9onNEvaAQs+gBFdjewbkKmHWHziSVZtTKSIUHFfJXV5Eht4pACiRysaU1zZMG+KyYM3o7dpsoLh+BBtaQLrmw5C/fbkiXSSpYASVDR/4a9umWvlB5YfSNHlF7fnZ1lENF/xMDmHha0RHmhm8gKuICV+qkOJQwVddZWw7jEnwYh9QuRO4vHfe03wOYZLG2AAsz4DIpUzs+oP6QB9Ww=
  on:
    tags: true
    repo: sih4sing5hong5/tai5-uan5_gian5-gi2_hok8-bu7
